---
phase: 15-resource-creation-ui
plan: 02
type: execute
wave: 2
depends_on: ["15-01"]
files_modified:
  - apps/x402-jobs/src/components/modals/CreateResourceModal.tsx
autonomous: true

must_haves:
  truths:
    - "User can select 'OpenRouter Model' from resource type options"
    - "User can browse and select a model from ModelBrowser"
    - "User can enter system prompt with {{param}} syntax detection and visual indicators"
    - "User can define parameters with auto-extraction from prompt"
    - "User can configure model settings (temperature, max_tokens)"
    - "User can set price and metadata (name, description, category)"
    - "Form validates OpenRouter API key exists before allowing creation"
    - "Form submission creates openrouter_instant resource in database"
  artifacts:
    - path: "apps/x402-jobs/src/components/modals/CreateResourceModal.tsx"
      provides: "OpenRouter resource creation form"
      contains: "openrouter_instant"
  key_links:
    - from: "apps/x402-jobs/src/components/modals/CreateResourceModal.tsx"
      to: "apps/x402-jobs/src/components/ModelBrowser/index.ts"
      via: "ModelBrowser import via barrel export"
      pattern: "import.*ModelBrowser.*from.*@/components/ModelBrowser"
    - from: "apps/x402-jobs/src/components/modals/CreateResourceModal.tsx"
      to: "apps/x402-jobs/src/types/openrouter-resource.ts"
      via: "Schema import for form validation"
      pattern: "createOpenRouterResourceSchema"
    - from: "apps/x402-jobs/src/components/modals/CreateResourceModal.tsx"
      to: "/api/v1/resources/instant"
      via: "POST request on form submit"
      pattern: "authenticatedFetch.*instant"
---

<objective>
Add OpenRouter resource creation flow to CreateResourceModal.

Purpose: Users can create monetized OpenRouter endpoints by selecting a model, writing a prompt template, and setting price.

Output: Extended CreateResourceModal with full OpenRouter resource creation capability.
</objective>

<execution_context>
@~/.claude/get-shit-done/workflows/execute-plan.md
@~/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/15-resource-creation-ui/15-01-PLAN.md
@.planning/phases/14-model-browser-ui/14-02-SUMMARY.md
@apps/x402-jobs/src/components/modals/CreateResourceModal.tsx
@apps/x402-jobs/src/components/ModelBrowser/index.ts
@apps/x402-jobs/src/types/openrouter-resource.ts
</context>

<tasks>

<task type="auto">
  <name>Task 1: Add OpenRouter type selection and integration check</name>
  <files>apps/x402-jobs/src/components/modals/CreateResourceModal.tsx</files>
  <action>
Extend the CreateResourceModal to support OpenRouter resources.

1. **Update ResourceType union** (around line 108):
   Add 'openrouter_instant' to the type:

   ```typescript
   type ResourceType =
     | "external"
     | "proxy"
     | "prompt_template"
     | "openrouter_instant";
   ```

2. **Add OpenRouter integration check** (around line 268, after claudeIntegration):

   ```typescript
   const { data: openrouterIntegration } = useSWR<{ hasApiKey: boolean }>(
     resourceType === "openrouter_instant"
       ? "/integrations/openrouter/config"
       : null,
     authenticatedFetcher,
   );
   ```

3. **Add type selection card** in step "select" section (around line 1002-1018):
   Add a fourth card after "Claude Prompt":

   ```tsx
   <button
     onClick={() => handleSelectType("openrouter_instant")}
     className="p-4 rounded-xl border-2 border-border bg-background hover:border-primary/50 hover:bg-accent/50 transition-all text-left group"
   >
     <div className="w-10 h-10 rounded-lg bg-indigo-500/10 flex items-center justify-center mb-3 group-hover:bg-indigo-500/20 transition-colors">
       <Network className="w-5 h-5 text-indigo-500" />
     </div>
     <h3 className="font-medium mb-1">OpenRouter Model</h3>
     <p className="text-sm text-muted-foreground">
       200+ AI models, one endpoint
     </p>
   </button>
   ```

   Import Network icon from lucide-react.

4. **Update dialog title** (around line 939-961):
   Add case for openrouter_instant:

   ```tsx
   : resourceType === "openrouter_instant"
     ? "Create OpenRouter Resource"
   ```

   And badge:

   ```tsx
   : resourceType === "openrouter_instant"
     ? "bg-indigo-500/10 text-indigo-500"
   ```

5. **Update grid layout** to accommodate 4 cards:
   Change `grid-cols-1 sm:grid-cols-3` to `grid-cols-1 sm:grid-cols-2 lg:grid-cols-4` (around line 977)
   </action>
   <verify>
   Build the frontend: `cd /Users/rawgroundbeef/Projects/memeputer/apps/x402-jobs && npm run build`
   Should compile. Visually: Type selection shows 4 cards including "OpenRouter Model".
   </verify>
   <done>
   OpenRouter appears as fourth option in type selection with indigo Network icon and proper badge styling.
   </done>
   </task>

<task type="auto">
  <name>Task 2: Add OpenRouter form with model selection and prompt editor</name>
  <files>apps/x402-jobs/src/components/modals/CreateResourceModal.tsx</files>
  <action>
Add the complete OpenRouter resource creation form following the Claude prompt template pattern exactly.

1. **Import dependencies** at top of file:

   ```typescript
   // ModelBrowser is exported via barrel from index.ts
   import { ModelBrowser } from "@/components/ModelBrowser";
   import { AIModel } from "@/hooks/useAIModelsQuery";
   import {
     createOpenRouterResourceSchema,
     CreateOpenRouterResourceInput,
   } from "@/types/openrouter-resource";
   ```

2. **Add state for selected model** (around line 244-256):

   ```typescript
   const [selectedModel, setSelectedModel] = useState<AIModel | null>(null);
   const [showModelBrowser, setShowModelBrowser] = useState(false);
   ```

3. **Add OpenRouter form using react-hook-form** (around line 304-321, after promptTemplateForm):

   ```typescript
   const openrouterForm = useForm<CreateOpenRouterResourceInput>({
     resolver: zodResolver(createOpenRouterResourceSchema as any),
     defaultValues: {
       name: "",
       slug: "",
       description: "",
       category: "",
       avatar_url: "",
       price_usdc: "0.01",
       network: "base",
       model_id: "",
       system_prompt: "",
       parameters: [],
       temperature: 1,
       max_tokens: 4096,
       allows_user_message: false,
     },
   });

   const {
     fields: orParameterFields,
     append: appendOrParameter,
     remove: removeOrParameter,
   } = useFieldArray({
     control: openrouterForm.control,
     name: "parameters",
   });
   ```

4. **Add auto-extract parameters for OpenRouter form** (following same pattern as promptTemplateForm, around line 337-360):

   ```typescript
   const orSystemPromptValue = openrouterForm.watch("system_prompt");
   const orParametersValue = openrouterForm.watch("parameters");

   useEffect(() => {
     if (!orSystemPromptValue) return;
     const tagsInPrompt = extractParameterTags(orSystemPromptValue);
     const existingParamNames = (orParametersValue || []).map((p) => p.name);
     const newTags = tagsInPrompt.filter(
       (tag) => !existingParamNames.includes(tag),
     );
     newTags.forEach((tag) => {
       appendOrParameter(
         { name: tag, description: "", required: true, default: "" },
         { shouldFocus: false },
       );
     });
   }, [orSystemPromptValue, orParametersValue, appendOrParameter]);
   ```

5. **Update handleClose** (around line 474-498) to reset OpenRouter state:

   ```typescript
   setSelectedModel(null);
   setShowModelBrowser(false);
   openrouterForm.reset();
   ```

6. **Add handleCreateOpenRouter function** (after handleCreatePromptTemplate, around line 783):

   ```typescript
   const handleCreateOpenRouter = async (
     data: CreateOpenRouterResourceInput,
   ) => {
     if (slugStatus && !slugStatus.available) {
       setError(slugStatus.reason || "Slug is not available");
       return;
     }

     setError("");
     setIsSubmitting(true);

     try {
       const body = {
         resourceType: "openrouter_instant",
         name: data.name.trim(),
         slug: data.slug.trim(),
         description: data.description?.trim() || null,
         priceUsdc: parseFloat(data.price_usdc),
         network: data.network,
         category: data.category,
         avatarUrl: data.avatar_url?.trim() || null,
         // OpenRouter specific
         modelId: data.model_id,
         systemPrompt: data.system_prompt,
         parameters: data.parameters,
         temperature: data.temperature,
         maxTokens: data.max_tokens,
         allowsUserMessage: data.allows_user_message,
       };

       const res = await authenticatedFetch("/resources/instant", {
         method: "POST",
         headers: { "Content-Type": "application/json" },
         body: JSON.stringify(body),
       });

       if (!res.ok) {
         const responseData = await res.json();
         throw new Error(
           responseData.error || "Failed to create OpenRouter resource",
         );
       }

       const responseData = await res.json();
       setCreatedResource({
         url: responseData.resource.url,
         slug: responseData.resource.slug,
       });
       setStep("success");
       onSuccess?.();
     } catch (err) {
       setError(
         err instanceof Error
           ? err.message
           : "Failed to create OpenRouter resource",
       );
     } finally {
       setIsSubmitting(false);
     }
   };
   ```

7. **Handle name change for OpenRouter** - extend handleNameChange function (around line 437-453):
   Add case for "openrouter_instant":

   ```typescript
   } else if (formType === "openrouter_instant") {
     openrouterForm.setValue("slug", newSlug, { shouldValidate: true });
     debouncedSlugCheck(newSlug, openrouterForm.getValues("network"));
   }
   ```

8. **Handle slug regeneration** - extend regenerateSlug function (around line 456-472):
   Add case for "openrouter_instant":
   ```typescript
   } else if (formType === "openrouter_instant") {
     const name = openrouterForm.getValues("name");
     const newSlug = generateSlug(name);
     openrouterForm.setValue("slug", newSlug, { shouldValidate: true });
     debouncedSlugCheck(newSlug, openrouterForm.getValues("network"));
   }
   ```
     </action>
     <verify>
   Build: `cd /Users/rawgroundbeef/Projects/memeputer/apps/x402-jobs && npm run build`
   TypeScript should compile without errors.
     </verify>
     <done>
   OpenRouter form state, handlers, and parameter auto-extraction are in place.
     </done>
   </task>

<task type="auto">
  <name>Task 3: Add OpenRouter form UI with model browser integration</name>
  <files>apps/x402-jobs/src/components/modals/CreateResourceModal.tsx</files>
  <action>
Add the OpenRouter form UI section following the Claude prompt template pattern exactly.

1. **Add form section** after the prompt_template form section (around line 2161):

   ```tsx
   {
     /* Step 2d: OpenRouter Resource Creation Form */
   }
   {
     step === "form" && resourceType === "openrouter_instant" && (
       <form className="space-y-4">
         {/* OpenRouter Integration Warning */}
         {openrouterIntegration && !openrouterIntegration.hasApiKey && (
           <Alert className="mb-4">
             <AlertCircle className="h-4 w-4" />
             <AlertDescription>
               You need to configure your OpenRouter API key before creating
               resources.{" "}
               <NextLink
                 href="/dashboard/integrations"
                 className="text-primary hover:underline font-medium"
               >
                 Configure in Settings
               </NextLink>
             </AlertDescription>
           </Alert>
         )}

         {/* Network Selection */}
         <div>
           <Label>Network</Label>
           <div className="flex items-center gap-2 mt-1.5">
             {(["base", "solana"] as const).map((net) => (
               <button
                 key={net}
                 type="button"
                 onClick={() => {
                   openrouterForm.setValue("network", net);
                   const currentSlug = openrouterForm.getValues("slug");
                   if (currentSlug) {
                     debouncedSlugCheck(currentSlug, net);
                   }
                 }}
                 className={`flex items-center gap-2 px-4 py-2 rounded-lg border transition-all ${
                   openrouterForm.watch("network") === net
                     ? "border-primary bg-primary/5 text-foreground"
                     : "border-border bg-background text-muted-foreground hover:bg-accent"
                 }`}
               >
                 <ChainIcon network={net} className="w-4 h-4" />
                 <span className="text-sm font-medium capitalize">{net}</span>
               </button>
             ))}
           </div>
         </div>

         {/* Model Selection */}
         <div>
           <Label>Model *</Label>
           {selectedModel ? (
             <div className="mt-1.5 p-3 border border-border rounded-lg flex items-center justify-between bg-muted/30">
               <div className="flex items-center gap-3">
                 <div className="text-sm">
                   <span className="font-medium">
                     {selectedModel.display_name}
                   </span>
                   <span className="text-muted-foreground ml-2">
                     ({selectedModel.provider})
                   </span>
                 </div>
               </div>
               <Button
                 type="button"
                 variant="ghost"
                 size="sm"
                 onClick={() => setShowModelBrowser(true)}
               >
                 Change
               </Button>
             </div>
           ) : (
             <Button
               type="button"
               variant="outline"
               className="mt-1.5 w-full justify-start text-muted-foreground"
               onClick={() => setShowModelBrowser(true)}
             >
               <Box className="w-4 h-4 mr-2" />
               Select a model...
             </Button>
           )}
           {openrouterForm.formState.errors.model_id && (
             <FieldError message="Please select a model" />
           )}
         </div>

         {/* Model Browser Dialog */}
         {showModelBrowser && (
           <div className="fixed inset-0 z-50 bg-background/80 backdrop-blur-sm flex items-center justify-center p-4">
             <div className="bg-background border border-border rounded-xl shadow-lg w-full max-w-4xl max-h-[80vh] overflow-hidden flex flex-col">
               <div className="p-4 border-b border-border flex items-center justify-between">
                 <h3 className="font-semibold">Select Model</h3>
                 <Button
                   variant="ghost"
                   size="sm"
                   onClick={() => setShowModelBrowser(false)}
                 >
                   Close
                 </Button>
               </div>
               <div className="p-4 overflow-y-auto flex-1">
                 <ModelBrowser
                   selectedModelId={selectedModel?.id}
                   onSelect={(model) => {
                     setSelectedModel(model);
                     openrouterForm.setValue("model_id", model.id);
                     // Set default max_tokens based on model context length
                     if (model.context_length) {
                       const defaultMax = Math.min(
                         model.context_length / 4,
                         4096,
                       );
                       openrouterForm.setValue("max_tokens", defaultMax);
                     }
                     setShowModelBrowser(false);
                   }}
                 />
               </div>
             </div>
           </div>
         )}

         {/* Name */}
         <div>
           <Label htmlFor="or-name">Name *</Label>
           <Input
             id="or-name"
             placeholder="My AI Assistant"
             {...openrouterForm.register("name", {
               onChange: (e: React.ChangeEvent<HTMLInputElement>) => {
                 openrouterForm.setValue("name", e.target.value, {
                   shouldValidate: true,
                 });
                 handleNameChange(e.target.value, "openrouter_instant");
               },
             })}
             className={`mt-1.5 ${openrouterForm.formState.errors.name ? "border-destructive" : ""}`}
           />
           <FieldError
             message={openrouterForm.formState.errors.name?.message}
           />
         </div>

         {/* Slug */}
         <div>
           <Label htmlFor="or-slug">
             <span>URL Slug *</span>
             <span className="text-xs text-muted-foreground ml-2 font-normal">
               Your resource will be at: /@username/
               {openrouterForm.watch("slug") || "..."}
             </span>
           </Label>
           <div className="flex gap-2 mt-1.5">
             <div className="relative flex-1">
               <Input
                 id="or-slug"
                 placeholder="my-ai-assistant"
                 {...openrouterForm.register("slug", {
                   onChange: (e) => {
                     slugManuallyEdited.current = true;
                     const val = e.target.value
                       .toLowerCase()
                       .replace(/[^a-z0-9-]/g, "");
                     openrouterForm.setValue("slug", val, {
                       shouldValidate: true,
                     });
                     debouncedSlugCheck(
                       val,
                       openrouterForm.getValues("network"),
                     );
                   },
                 })}
                 className={`pr-10 ${openrouterForm.formState.errors.slug || (slugStatus && !slugStatus.available) ? "border-destructive" : slugStatus?.available ? "border-primary" : ""}`}
               />
               <div className="absolute right-3 top-1/2 -translate-y-1/2">
                 {isCheckingSlug && (
                   <Loader2 className="h-4 w-4 animate-spin text-muted-foreground" />
                 )}
                 {!isCheckingSlug && slugStatus?.available && (
                   <Check className="h-4 w-4 text-primary" />
                 )}
                 {!isCheckingSlug && slugStatus && !slugStatus.available && (
                   <AlertCircle className="h-4 w-4 text-destructive" />
                 )}
               </div>
             </div>
             <button
               type="button"
               onClick={() => regenerateSlug("openrouter_instant")}
               className="px-3 py-2 text-sm text-muted-foreground hover:text-foreground border border-border rounded-md hover:bg-accent transition-colors"
               title="Regenerate from name"
             >
               <RefreshCw className="h-4 w-4" />
             </button>
           </div>
           {openrouterForm.formState.errors.slug && (
             <FieldError
               message={openrouterForm.formState.errors.slug.message}
             />
           )}
           {!openrouterForm.formState.errors.slug &&
             slugStatus &&
             !slugStatus.available && (
               <p className="text-xs text-destructive mt-1">
                 {slugStatus.reason}
               </p>
             )}
           {!openrouterForm.formState.errors.slug && slugStatus?.available && (
             <p className="text-xs text-primary mt-1">Slug is available</p>
           )}
         </div>

         {/* Description */}
         <div>
           <Label htmlFor="or-description">Description</Label>
           <Textarea
             id="or-description"
             placeholder="What does this resource do?"
             {...openrouterForm.register("description")}
             className="mt-1.5"
             rows={2}
           />
         </div>

         {/* Image */}
         <div>
           <Label>Image (optional)</Label>
           <div className="mt-1.5">
             <ImageUrlOrUpload
               value={openrouterForm.watch("avatar_url") || ""}
               onChange={(val) => openrouterForm.setValue("avatar_url", val)}
               placeholder="https://example.com/image.png"
             />
           </div>
         </div>

         {/* Category */}
         <div>
           <Label>Category *</Label>
           <Select
             value={openrouterForm.watch("category") || ""}
             onChange={(val) => openrouterForm.setValue("category", val)}
             options={[...RESOURCE_CATEGORIES]}
             placeholder="Select a category"
             className={`mt-1.5 ${openrouterForm.formState.errors.category ? "border-destructive" : ""}`}
           />
           <FieldError
             message={openrouterForm.formState.errors.category?.message}
           />
         </div>

         {/* Price */}
         <div>
           <Label htmlFor="or-price">Price (USDC) *</Label>
           <Input
             id="or-price"
             type="number"
             step="0.01"
             min="0.01"
             placeholder="0.01"
             {...openrouterForm.register("price_usdc")}
             className={`mt-1.5 ${openrouterForm.formState.errors.price_usdc ? "border-destructive" : ""}`}
           />
           <p className="text-xs text-muted-foreground mt-1">
             Your markup on top of model costs. Minimum $0.01
           </p>
           <FieldError
             message={openrouterForm.formState.errors.price_usdc?.message}
           />
         </div>

         {/* System Prompt Editor with {{param}} syntax detection */}
         <div className="border-t border-border pt-4 space-y-2">
           <Label htmlFor="or-system-prompt">System Prompt *</Label>
           <p className="text-xs text-muted-foreground">
             Use{" "}
             <code className="px-1 py-0.5 bg-muted rounded">
               {"{paramName}{/paramName}"}
             </code>{" "}
             to mark parameter placeholders. Tags are detected and shown below.
           </p>
           <Textarea
             id="or-system-prompt"
             {...openrouterForm.register("system_prompt")}
             className="font-mono text-sm min-h-[200px] resize-y"
             placeholder="You are a helpful assistant that specializes in {topic}{/topic}..."
           />

           {/* Tag status indicators - visual feedback for detected parameters */}
           <div className="flex justify-between items-start gap-4 text-xs">
             <div className="flex-1">
               {(() => {
                 const systemPrompt =
                   openrouterForm.watch("system_prompt") || "";
                 const tags = extractParameterTags(systemPrompt);
                 const params = openrouterForm.watch("parameters") || [];
                 const paramNames = params.map((p) => p.name).filter(Boolean);
                 const undefinedTags = findUndefinedTags(
                   systemPrompt,
                   paramNames,
                 );
                 const unusedParams = findUnusedParameters(
                   systemPrompt,
                   paramNames,
                 );

                 return (
                   <>
                     {tags.length > 0 ? (
                       <span className="text-muted-foreground">
                         Tags:{" "}
                         {tags.map((tag) => (
                           <span
                             key={tag}
                             className={`mx-0.5 px-1.5 py-0.5 rounded ${
                               undefinedTags.includes(tag)
                                 ? "bg-yellow-500/20 text-yellow-600 dark:text-yellow-400"
                                 : "bg-purple-500/10 text-purple-600 dark:text-purple-400"
                             }`}
                           >
                             {tag}
                           </span>
                         ))}
                       </span>
                     ) : (
                       <span className="text-muted-foreground">
                         No parameter tags found
                       </span>
                     )}
                     {undefinedTags.length > 0 && (
                       <p className="text-yellow-600 dark:text-yellow-400 mt-1">
                         Warning: Tags without parameters:{" "}
                         {undefinedTags.join(", ")}
                       </p>
                     )}
                     {unusedParams.length > 0 && (
                       <p className="text-yellow-600 dark:text-yellow-400 mt-1">
                         Warning: Unused parameters: {unusedParams.join(", ")}
                       </p>
                     )}
                   </>
                 );
               })()}
             </div>
             <span className="text-muted-foreground">
               {(openrouterForm.watch("system_prompt") || "").length} characters
             </span>
           </div>
           <FieldError
             message={openrouterForm.formState.errors.system_prompt?.message}
           />
         </div>

         {/* Parameters Section - following exact Claude pattern */}
         <div className="border-t border-border pt-4 space-y-3">
           <div className="flex items-center justify-between">
             <div>
               <Label>Parameters</Label>
               <p className="text-xs text-muted-foreground">
                 Define input fields that callers will fill in
               </p>
             </div>
             <Button
               type="button"
               variant="outline"
               size="sm"
               onClick={() =>
                 appendOrParameter({
                   name: "",
                   description: "",
                   required: true,
                   default: "",
                 })
               }
             >
               <Plus className="h-4 w-4 mr-1" />
               Add Parameter
             </Button>
           </div>

           {orParameterFields.length === 0 ? (
             <p className="text-sm text-muted-foreground py-4 text-center border border-dashed border-border rounded-lg">
               No parameters defined. Add parameters to let callers customize
               the prompt.
             </p>
           ) : (
             <div className="space-y-3">
               {orParameterFields.map((field, index) => (
                 <div
                   key={field.id}
                   className="p-3 border border-border rounded-lg space-y-3 bg-muted/30"
                 >
                   <div className="flex items-start gap-3">
                     <div className="flex-1 space-y-2">
                       <Input
                         placeholder="Parameter name (e.g., topic)"
                         {...openrouterForm.register(
                           `parameters.${index}.name`,
                         )}
                         className={
                           openrouterForm.formState.errors.parameters?.[index]
                             ?.name
                             ? "border-destructive"
                             : ""
                         }
                       />
                       <Input
                         placeholder="Description (optional)"
                         {...openrouterForm.register(
                           `parameters.${index}.description`,
                         )}
                       />
                     </div>
                     <Button
                       type="button"
                       variant="ghost"
                       size="sm"
                       onClick={() => removeOrParameter(index)}
                       className="text-muted-foreground hover:text-destructive"
                     >
                       <Trash2 className="h-4 w-4" />
                     </Button>
                   </div>
                   <div className="flex items-center gap-4">
                     <label className="flex items-center gap-1.5 cursor-pointer">
                       <input
                         type="checkbox"
                         checked={openrouterForm.watch(
                           `parameters.${index}.required`,
                         )}
                         onChange={(e) =>
                           openrouterForm.setValue(
                             `parameters.${index}.required`,
                             e.target.checked,
                           )
                         }
                         className="w-4 h-4 rounded border-border text-primary focus:ring-primary"
                       />
                       <span className="text-sm text-muted-foreground">
                         Required
                       </span>
                     </label>
                     <div className="flex-1">
                       <Input
                         placeholder="Default value (optional)"
                         {...openrouterForm.register(
                           `parameters.${index}.default`,
                         )}
                         disabled={openrouterForm.watch(
                           `parameters.${index}.required`,
                         )}
                         className={
                           openrouterForm.watch(`parameters.${index}.required`)
                             ? "opacity-50"
                             : ""
                         }
                       />
                     </div>
                   </div>
                 </div>
               ))}
             </div>
           )}
         </div>

         {/* Model Settings */}
         <div className="border-t border-border pt-4 space-y-4">
           <Label>Model Settings</Label>

           {/* Temperature */}
           <div>
             <Label htmlFor="or-temperature" className="text-sm font-normal">
               Temperature
             </Label>
             <Input
               id="or-temperature"
               type="number"
               step="0.1"
               min={0}
               max={2}
               {...openrouterForm.register("temperature", {
                 valueAsNumber: true,
               })}
               className="mt-1.5 w-32"
             />
             <p className="text-xs text-muted-foreground mt-1">
               Controls randomness (0-2). Lower = more focused, higher = more
               creative.
             </p>
           </div>

           {/* Max Tokens */}
           <div>
             <Label htmlFor="or-max-tokens" className="text-sm font-normal">
               Max Tokens
             </Label>
             <Input
               id="or-max-tokens"
               type="number"
               min={1}
               max={128000}
               {...openrouterForm.register("max_tokens", {
                 valueAsNumber: true,
               })}
               className="mt-1.5 w-32"
             />
             <p className="text-xs text-muted-foreground mt-1">
               Maximum response length.{" "}
               {selectedModel?.context_length
                 ? `Model supports up to ${selectedModel.context_length.toLocaleString()} tokens.`
                 : ""}
             </p>
           </div>

           {/* User Input */}
           <div className="flex items-center justify-between py-2">
             <div>
               <Label className="text-sm font-normal">User Input</Label>
               <p className="text-xs text-muted-foreground">
                 Allow additional input from users
               </p>
             </div>
             <Switch
               checked={openrouterForm.watch("allows_user_message")}
               onCheckedChange={(checked) =>
                 openrouterForm.setValue("allows_user_message", checked)
               }
             />
           </div>
         </div>
       </form>
     );
   }
   ```

2. **Add footer buttons for OpenRouter** (after prompt_template footer section, around line 2312):

   ```tsx
   {
     step === "form" && resourceType === "openrouter_instant" && (
       <>
         <Button variant="ghost" onClick={handleClose} disabled={isSubmitting}>
           Cancel
         </Button>
         <Button
           onClick={openrouterForm.handleSubmit(handleCreateOpenRouter)}
           disabled={
             isSubmitting ||
             isCheckingSlug ||
             (slugStatus !== null && !slugStatus.available) ||
             (openrouterIntegration && !openrouterIntegration.hasApiKey)
           }
           variant="primary"
         >
           {isSubmitting ? (
             <>
               <Loader2 className="w-4 h-4 animate-spin mr-2" />
               Creating...
             </>
           ) : (
             "Create Resource"
           )}
         </Button>
       </>
     );
   }
   ```

3. **Import Network icon** at top with other lucide imports.

**Note on CREA-03 (Syntax highlighting):** This implementation uses syntax DETECTION with visual tag indicators below the textarea rather than inline syntax highlighting. The tags are extracted and displayed as colored badges (purple for defined, yellow for undefined). This approach provides clear feedback without the complexity of a full syntax highlighting library. The `font-mono` styling on the textarea gives a code-like appearance.
</action>
<verify>
Build: `cd /Users/rawgroundbeef/Projects/memeputer/apps/x402-jobs && npm run build`
Should compile without errors.
</verify>
<done>
Complete OpenRouter form UI with model browser, prompt editor with tag detection and visual indicators, parameters, and model settings. Form submits to backend and creates resource successfully.
</done>
</task>

</tasks>

<verification>
1. Frontend builds: `cd apps/x402-jobs && npm run build`
2. Type selection shows 4 cards with OpenRouter option
3. OpenRouter form includes:
   - API key warning if not configured
   - Model selection with browser dialog
   - Prompt editor with {{param}} tag detection and visual indicators
   - Parameters section with auto-add
   - Model settings (temperature, max_tokens)
   - Price and metadata fields
4. Form submits to backend and resource appears in user's list
</verification>

<success_criteria>

1. "OpenRouter Model" appears in type selection (CREA-01)
2. Model browser dialog allows selection with search/filters (CREA-02)
3. Prompt template editor with {{param}} syntax detection and visual tag indicators (CREA-03)
4. Parameter definitions with name, description, required, default (CREA-04)
5. Price field with minimum $0.01 (CREA-05)
6. Name, description, category, image fields (CREA-06)
7. System prompt hidden from callers (stored server-side) (CREA-07)
8. Model parameters: temperature, max_tokens, allows_user_message (CREA-08)
9. Form submission creates resource and user sees success confirmation
   </success_criteria>

<output>
After completion, create `.planning/phases/15-resource-creation-ui/15-02-SUMMARY.md`
</output>
